Mag现货提示系统 MVP需求文档（修订版）
一、系统目标
用户可通过数据链接（日数据表格/Notion API等，如：https://serious-club-96d.notion.site/28c019fe17e0806da490c0d6b2ad8203）录入、更新各币种每日核心指标。

系统根据Mag交易体系算法实现：多层对标链分析、节点对比与质量判定、分级风险建议，输出结构化提示并自动存档（采用sqlite，方便迁移与本地化）。

二、数据结构 & 录入
1. 数据字段要求
日期（date）

币种（coin）

当前所处进场期/退场期及天数（phase_type/phase_days）

场外指数（offchain_index）

爆破指数（break_index）

其他（如谢林点/潜力区信息等，扩展预留）

Dragon Leader 动态判断字段（如行情接口返回或数据表列出最新龙头币序列）

2. 动态龙头币逻辑
依据每日数据自动排序BTC之后、美股纳指之前出现的新币为“当日龙头币”

系统每次分析低阶币需溯源链上各级主线币信号

3. 存储与唯一性
以sqlite实现，主键为日期+币种（date, coin）

若同一天同币种数据多次输入，后录入覆盖前数据

三、自动提示算法
1. 对标链多层传导
小币→最近龙头币→BTC→美股纳指（动态识别龙头币），各层信号必须逐级通过，低阶跟随高阶。

2. 节点关键判比
进场期/退场期第一天，自动对比最近一次爆破节点/同类节点，插值法还原关键节点场外指数差值

跨越/临近1000时自动+5%相变修正

质量阈值正负5%（可配置）

3. 核心标准输出格式（建议自动包含以下内容）
text
币种：BTC
日期：2025-10-15
当前状态：进场期第6天
对标链分析：美股优质进场期，BTC/ETH/BNB均同步进场
关键节点对比：1200（10.12, 爆破跌200）→ 1500（10.15, 进场期第一天）
场外指数涨幅：+25%
判定结果：优质进场期

分级建议：
- 高稳健型：分批建仓主流币，设紧密止损
- 高风险型：主流重仓，山寨适度分配，动态加码设止损
- 中间型：基线仓位建仓，逐节点上涨后追加，注重实时风控
（备注：必须明确标注“当前币种处于进/退场期第X天”）

四、数据库规范（sqlite）
表结构推荐：

sql
CREATE TABLE IF NOT EXISTS coin_daily_data (
  date  TEXT,
  coin  TEXT,
  phase_type TEXT, -- 进场期/退场期
  phase_days INTEGER,
  offchain_index  INTEGER,
  break_index     INTEGER,
  shelin_point    INTEGER,
  dragon_leader   INTEGER, -- 1为龙头币，0为否
  UNIQUE(date, coin)
);
若每日同一币多次录入只保留最后一次

五、功能边界（MVP阶段）
仅支持核心数据结构、上传与分析/分级自动输出，不实现界面、历史回溯、批量导入及第三方扩展等高级功能

动态龙头币识别以每日输入或数据API表顺序为准

优先保障单日多币/链自动处理、参数可配置

后续拓展如多账户、批量节点回测、对接主流行情API等待下一阶段完善